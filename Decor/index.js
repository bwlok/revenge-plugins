(function(z,o,r,M,Se,Q,h,b,D,$){"use strict";const Re="https://decor.fieryflames.dev",N=Re+"/api",De=N+"/authorize",Ee="https://decorcdn.fieryflames.dev",be="1096966363416899624",I="100101099111114",W="11497119",Ne=function(e){return function(t,n,a){const s=a.subscribe;return a.subscribe=function(c,d,p){let u=c;if(d){const y=p?.equalityFn||Object.is;let g=c(a.getState());u=function(B){const v=c(B);if(!y(g,v)){const C=g;d(g=v,C)}},p?.fireImmediately&&d(g,g)}return s(u)},e(t,n,a)}};var we=Object.defineProperty,Y=Object.getOwnPropertySymbols,Ae=Object.prototype.hasOwnProperty,Ce=Object.prototype.propertyIsEnumerable,q=function(e,t,n){return t in e?we(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},_=function(e,t){for(var n in t||(t={}))Ae.call(t,n)&&q(e,n,t[n]);if(Y)for(var n of Y(t))Ce.call(t,n)&&q(e,n,t[n]);return e};const m=function(e){return function(t){try{const n=e(t);return n instanceof Promise?n:{then(a){return m(a)(n)},catch(a){return this}}}catch(n){return{then(a){return this},catch(a){return m(a)(n)}}}}},Ie=function(e,t){return function(n,a,s){let i=_({getStorage:function(){return localStorage},serialize:JSON.stringify,deserialize:JSON.parse,partialize:function(l){return l},version:0,merge:function(l,S){return _(_({},S),l)}},t);(i.blacklist||i.whitelist)&&console.warn(`The ${i.blacklist?"blacklist":"whitelist"} option is deprecated and will be removed in the next version. Please use the 'partialize' option instead.`);let c=!1;const d=new Set,p=new Set;let u;try{u=i.getStorage()}catch{}if(u)u.removeItem||console.warn(`[zustand persist middleware] The given storage for item '${i.name}' does not contain a 'removeItem' method, which will be required in v4.`);else return e(function(...l){console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...l)},a,s);const y=m(i.serialize),g=function(){const l=i.partialize(_({},a()));i.whitelist&&Object.keys(l).forEach(function(R){var ve;!((ve=i.whitelist)!=null&&ve.includes(R))&&delete l[R]}),i.blacklist&&i.blacklist.forEach(function(R){return delete l[R]});let S;const f=y({state:l,version:i.version}).then(function(R){return u.setItem(i.name,R)}).catch(function(R){S=R});if(S)throw S;return f},B=s.setState;s.setState=function(l,S){B(l,S),g()};const v=e(function(...l){n(...l),g()},a,s);let C;const ge=function(){var l;if(!u)return;c=!1,d.forEach(function(f){return f(a())});const S=((l=i.onRehydrateStorage)==null?void 0:l.call(i,a()))||void 0;return m(u.getItem.bind(u))(i.name).then(function(f){if(f)return i.deserialize(f)}).then(function(f){if(f)if(typeof f.version=="number"&&f.version!==i.version){if(i.migrate)return i.migrate(f.state,f.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return f.state}).then(function(f){var R;return C=i.merge(f,(R=a())!=null?R:v),n(C,!0),g()}).then(function(){S?.(C,void 0),c=!0,p.forEach(function(f){return f(C)})}).catch(function(f){S?.(void 0,f)})};return s.persist={setOptions:function(l){i=_(_({},i),l),l.getStorage&&(u=l.getStorage())},clearStorage:function(){var l;(l=u?.removeItem)==null||l.call(u,i.name)},rehydrate:function(){return ge()},hasHydrated:function(){return c},onHydrate:function(l){return d.add(l),function(){d.delete(l)}},onFinishHydration:function(l){return p.add(l),function(){p.delete(l)}}},ge(),C||v}},_e=o.findByProps("create","useStore"),{create:H}=_e;function T(e,t){return r.FluxDispatcher.subscribe(e,t),function(){return void r.FluxDispatcher.unsubscribe(e,t)}}const Te=r.ReactNative.NativeModules.MMKVManager,J=o.findByStoreName("UserStore"),P=H(Ie(function(e,t){return{token:null,tokens:{},init:function(){return e({token:t().tokens[J.getCurrentUser().id]??null})},setToken:function(n){return e({token:n,tokens:{...t().tokens,[J.getCurrentUser().id]:n}})},isAuthorized:function(){return!!t().token}}},{name:"decor-auth",getStorage:function(){return Te},partialize:function(e){return{tokens:e.tokens}},onRehydrateStorage:function(){return function(e){return e.init()}}})),Pe=T("CONNECTION_OPEN",function(){return P.getState().init()}),{pushModal:Be,popModal:X}=o.findByProps("pushModal"),$e=o.findByName("OAuth2AuthorizeModal");function me(){return Be({key:"oauth2-authorize",modal:{key:"oauth2-authorize",modal:$e,animation:"slide-up",shouldPersistUnderModals:!1,props:{clientId:be,redirectUri:De,scopes:["identify"],responseType:"code",permissions:0n,cancelCompletesFlow:!1,callback:async function({location:e}){const t=new URL(e);t.searchParams.append("client","vendetta");const n=await fetch(t);if(n?.ok){const a=await n.text();P.getState().setToken(a)}else X("oauth2-authorize")},dismissOAuthModal:function(){return X("oauth2-authorize")}},closable:!0}})}const Ue=r.ReactNative.NativeModules.DCDFileManager??r.ReactNative.NativeModules.RTNFileManager;async function ke(e){return e.startsWith("file://")&&(e=e.slice(7)),Ue.readFile(e,"base64")}const{View:Z}=D.General,Fe=o.findByName("HeaderAvatar"),Oe=o.findByStoreName("UserStore"),ee=r.stylesheet.createThemedStyleSheet({headerAvatarContainer:{display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:b.semanticColors.BACKGROUND_FLOATING,width:208,height:208,borderRadius:4},container:{flexDirection:"row",width:"100%",justifyContent:"center",alignItems:"center",paddingHorizontal:16,paddingTop:16}});function te({pendingAvatarDecoration:e}){return React.createElement(Z,{style:ee.container},React.createElement(Z,{style:ee.headerAvatarContainer},React.createElement(Fe,{user:Oe.getCurrentUser(),pendingAvatarDecoration:e,size:"editAvatarDecoration",decorationStyle:{margin:-12}})))}async function U(e,t){const n=await fetch(e,{...t,headers:{...t?.headers,Authorization:`Bearer ${P.getState().token}`}});if(n.ok)return n;throw new Error(await n.text())}const xe=async function(e=void 0){if(e&&e.length===0)return{};const t=new URL(N+"/users");return e&&e.length!==0&&t.searchParams.set("ids",JSON.stringify(e)),await fetch(t).then(function(n){return n.json()})},Le=async function(e="@me"){return U(N+`/users/${e}/decorations`).then(function(t){return t.json()})},ze=async function(e="@me"){return U(N+`/users/${e}/decoration`).then(function(t){return t.json()})},ne=async function(e,t="@me"){const n=new FormData;return e&&Object.hasOwn(e,"hash")?(e=e,n.append("hash",e.hash)):e?e&&Object.hasOwn(e,"uri")&&(e=e,n.append("image",{uri:e.uri,type:e.fileType,name:e.fileName}),n.append("alt",e.alt)):n.append("hash",null),U(N+`/users/${t}/decoration`,{method:"PUT",body:n}).then(function(a){return e&&Object.hasOwn(e,"uri")?a.json():a.text()})},Me=async function(e){await U(N+`/decorations/${e}`,{method:"DELETE"})},re=async function(){return fetch(N+"/decorations/presets").then(function(e){return e.json()})};function ae(e){return`${e.animated?"a_":""}${e.hash}`}const ie=o.findByStoreName("UserStore"),oe=o.findByStoreName("SelectedChannelStore"),w=H(function(e,t){return{usersDecorations:new Map,fetchQueue:new Set,bulkFetch:r.lodash.debounce(async function(){const{fetchQueue:n,usersDecorations:a}=t();e({fetchQueue:new Set});const s=Array.from(n);if(s.length===0)return;const i=await xe(s),c=new Map(a);for(const[d,p]of Object.entries(i)){c.set(d,p);const u=ie.getUser(d);u&&(u.avatarDecoration=p?{asset:p,skuId:I}:null,u.avatarDecorationData=u.avatarDecoration,r.FluxDispatcher.dispatch({type:"USER_UPDATE",user:u}))}for(const d of s)c.has(d)||c.set(d,null);e({usersDecorations:c})}),async fetch(n,a=!1){const{usersDecorations:s,fetchQueue:i,bulkFetch:c}=t();!a&&s.has(n)||(e({fetchQueue:new Set(i).add(n)}),c())},async fetchMany(n){if(!n.length)return;const{usersDecorations:a,fetchQueue:s,bulkFetch:i}=t(),c=new Set(s);for(const d of n)a.has(d)||c.add(d);e({fetchQueue:c}),i()},get(n){return t().usersDecorations.get(n)},has(n){return t().usersDecorations.has(n)},set(n,a){const{usersDecorations:s}=t(),i=new Map(s);i.set(n,a),e({usersDecorations:i})}}}),He=[T("LOAD_MESSAGES_SUCCESS",function({messages:e}){w.getState().fetchMany(e.map(function(t){return t.author.id}))}),T("CONNECTION_OPEN",function(){w.getState().fetch(ie.getCurrentUser().id,!0)}),T("MESSAGE_CREATE",function(e){const t=oe.getChannelId();e.channelId===t&&w.getState().fetch(e.message.author.id)}),T("TYPING_START",function(e){const t=oe.getChannelId();e.channelId===t&&w.getState().fetch(e.userId)})];function k(e){return{asset:ae(e),skuId:I}}const je=o.findByStoreName("UserStore");function Ge(e){const t=je.getCurrentUser();t.avatarDecoration=e?k(e):null,t.avatarDecorationData=t.avatarDecoration,w.getState().set(t.id,e?ae(e):null),r.FluxDispatcher.dispatch({type:"CURRENT_USER_UPDATE",user:t}),r.FluxDispatcher.dispatch({type:"USER_SETTINGS_ACCOUNT_SUBMIT_SUCCESS"})}const E=H(Ne(function(e,t){return{decorations:[],selectedDecoration:null,fetched:!1,fetch:async function(){const n=await Le(),a=await ze();e({decorations:n,selectedDecoration:a,fetched:!0})},create:async function(n){const a=await ne(n);e({decorations:[...t().decorations,a]})},delete:async function(n){const a=typeof n=="object"?n.hash:n;await Me(a);const{selectedDecoration:s,decorations:i}=t();let c={decorations:i.filter(function(d){return d.hash!==a})};s?.hash===a&&(c.selectedDecoration=null),e(c)},select:async function(n){e({selectedDecoration:n})},clear:function(){return e({decorations:[],selectedDecoration:null,fetched:!1})}}})),Ve=[E.subscribe(function(e){return[e.selectedDecoration,e.fetched]},r.lodash.debounce(function([e,t],[n,a]){t!==a||e?.hash===n?.hash||(ne(e),Ge(e))},1e3)),T("CONNECTION_OPEN",function(){return E.getState().clear()})],{FormIcon:Ke}=D.Forms;function F({source:e}){return React.createElement(Ke,{source:e,style:{opacity:1}})}const{ScrollView:Qe,View:se}=r.ReactNative,{FormSection:We,FormRow:Ye,FormArrow:qe,FormInput:Je,FormDivider:Xe,FormHint:O}=D.Forms,{popModal:Ze}=o.findByProps("pushModal"),{launchImageLibrary:et}=o.findByProps("launchImageLibrary"),{useSafeAreaInsets:tt}=o.findByProps("useSafeAreaInsets"),nt=o.findByProps("parseTopic"),rt=r.stylesheet.createThemedStyleSheet({errorHint:{paddingTop:16,color:b.semanticColors.TEXT_DANGER}});function at(){const[e,t]=r.React.useState(null),[n,a]=r.React.useState(""),[s,i]=r.React.useState(!1),[c,d]=r.React.useState(null);r.React.useEffect(function(){c&&d(null)},[e]);const p=tt(),u=E(function(y){return y.create});return r.React.createElement(Qe,{contentContainerStyle:{flexGrow:1}},r.React.createElement(se,{style:{flex:1}},r.React.createElement(te,{pendingAvatarDecoration:e?{asset:e?.uri,skuId:W}:null}),c!==null&&r.React.createElement(O,{style:rt.errorHint},c.message),r.React.createElement(We,null,r.React.createElement(Ye,{label:"Select Image",leading:r.React.createElement(F,{source:h.getAssetIDByName("ic_image")}),trailing:qe,onPress:function(){et({mediaType:"photo"},function(y){if(!y||y.didCancel){t(null);return}const g=y.assets[0];g&&t(g)})}}),r.React.createElement(O,null,"File should be APNG or PNG."),r.React.createElement(Xe,null),r.React.createElement(Je,{value:n,onChange:a,placeholder:"Companion Cube",title:"Name"})),r.React.createElement(O,null,nt.parse("Make sure your decoration does not violate [the guidelines](https://github.com/decor-discord/.github/blob/main/GUIDELINES.md) before creating your decoration.",!0,{allowLinks:!0})),r.ReactNative.Platform.OS==="android"&&r.React.createElement(O,null,"APNGs will not animate in the preview above on Android.")),r.React.createElement(se,{style:{justifyContent:"flex-end",paddingHorizontal:16,paddingBottom:p.bottom}},r.React.createElement(D.Button,{text:"Create",color:"brand",size:"medium",onPress:async function(){i(!0);try{let y;r.ReactNative.Platform.OS==="ios"?y="data:"+e.type+";base64,"+await ke(e.uri):y=e.uri,await u({uri:y,fileName:e.fileName,fileType:e.type,alt:n}),Ze("create-decoration"),$.showToast("Decoration created and pending review.",h.getAssetIDByName("Check"))}catch(y){d(y),i(!1)}},loading:s,disabled:!e||!n||e.type!=="image/png"||!!c})))}const it=o.findByName("Navigator")??o.findByProps("Navigator")?.Navigator,ot=o.findByProps("getRenderCloseButton")?.getRenderCloseButton??o.findByProps("getHeaderCloseButton")?.getHeaderCloseButton,{popModal:st}=o.findByProps("pushModal");function ct(){return React.createElement(it,{initialRouteName:"CREATE_DECORATION",screens:{CREATE_DECORATION:{headerLeft:ot(function(){return st("create-decoration")}),render:at,title:"Create Decoration"}}})}const{pushModal:lt}=o.findByProps("pushModal");function ut(){return lt({key:"create-decoration",modal:{key:"create-decoration",modal:ct,animation:"slide-up",shouldPersistUnderModals:!1,closable:!0}})}const{View:ce,TouchableOpacity:dt}=r.ReactNative,{triggerHapticFeedback:ft,HapticFeedbackTypes:ht}=o.findByProps("triggerHapticFeedback"),x=r.stylesheet.createThemedStyleSheet({container:{display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:b.semanticColors.BACKGROUND_FLOATING,width:72,height:72,borderRadius:4},inner:{display:"flex",justifyContent:"space-evenly",alignItems:"center"},selected:{borderWidth:2,borderColor:b.semanticColors.BUTTON_OUTLINE_BRAND_BORDER_ACTIVE},disabled:{opacity:.5}}),le=function(e,...t){ft(ht.IMPACT_LIGHT),e(...t)};function ue({onPress:e=void 0,onLongPress:t=void 0,disabled:n=void 0,lookDisabled:a=void 0,selected:s=!1,children:i}){return React.createElement(dt,{onPress:e?function(...c){return le(e,...c)}:void 0,onLongPress:t?function(...c){return le(t,...c)}:void 0,disabled:n},React.createElement(ce,{style:[x.container,s?x.selected:null]},React.createElement(ce,{style:[x.inner,(n||a)&&x.disabled]},i)))}const{TextStyleSheet:yt,Text:pt}=o.findByProps("TextStyleSheet");function j({source:e,label:t,onPress:n,disabled:a,lookDisabled:s=!1,selected:i=!1}){return React.createElement(ue,{onPress:n,disabled:a,lookDisabled:s,selected:i},React.createElement(F,{source:e}),React.createElement(pt,{style:[yt["text-sm/medium"]]},t))}const gt=o.findByProps("getAvatarDecorationURL","default"),{showSimpleActionSheet:vt}=o.findByProps("showSimpleActionSheet"),{hideActionSheet:St}=o.findByProps("openLazy","hideActionSheet"),Rt=o.findByStoreName("UserStore"),{Image:Dt}=r.ReactNative;function Et(e){return vt({key:"DecorationActionSheet",header:{title:e.alt??"Decoration",icon:React.createElement(Dt,{source:{uri:gt.getAvatarDecorationURL({avatarDecoration:k(e)})},style:{width:24,height:24,marginRight:8}}),onClose:function(){return St()}},options:[{icon:h.getAssetIDByName("ic_message_copy"),label:"Copy Decoration Hash",onPress:function(){r.clipboard.setString(e.hash),$.showToast("Copied Decoration Hash!",h.getAssetIDByName("toast_copy_message"))}},...e.authorId===Rt.getCurrentUser().id?[{icon:h.getAssetIDByName("ic_message_delete"),label:"Delete",isDestructive:!0,onPress:function(){return Q.showConfirmationAlert({title:"Delete Decoration",content:`Are you sure you want to delete ${e.alt??"this decoration"}?`,confirmText:"Delete",cancelText:"Cancel",confirmColor:"red",onConfirm:function(){return r.ReactNative.unstable_batchedUpdates(function(){return E.getState().delete(e)})}})}}]:[]]})}const bt=o.findByName("CutoutableAvatarDecoration");function de({decoration:e,onPress:t=void 0,selectable:n=void 0,disabled:a=void 0}){const s=E(function(d){return d.selectedDecoration}),i=E(function(d){return d.select});n??=e.reviewed===null||e.reviewed===!0,t??=n?function(){return i(e)}:function(){return $.showToast("This decoration has not been approved yet.",h.getAssetIDByName("img_none"))};const c=s?.hash===e.hash;return React.createElement(ue,{onPress:t,onLongPress:function(){return Et(e)},selected:c,disabled:a,lookDisabled:!n},React.createElement(bt,{avatarDecoration:k(e),size:56,animate:c}))}const{FormTitle:Nt}=D.Forms,{View:G,FlatList:wt,Image:Yt}=r.ReactNative,{TextStyleSheet:At,Text:Ct}=o.findByProps("TextStyleSheet");o.findByName("SummarizedIconRow",!1),o.findByProps("AvatarSizes"),r.stylesheet.createThemedStyleSheet({wrapper:{borderWidth:2,borderRadius:20,borderColor:b.semanticColors.BACKGROUND_SECONDARY,backgroundColor:b.semanticColors.BACKGROUND_SECONDARY}}),o.findByProps("getUser","fetchCurrentUser"),o.findByStoreName("UserStore"),h.getAssetIDByName("default_avatar_0"),h.getAssetIDByName("default_avatar_1"),h.getAssetIDByName("default_avatar_2"),h.getAssetIDByName("default_avatar_3"),h.getAssetIDByName("default_avatar_4"),h.getAssetIDByName("default_avatar_5");function It({preset:e}){const t=E(function(a){return a.select}),n=r.NavigationNative.useNavigation();return React.createElement(G,null,React.createElement(G,null,React.createElement(Nt,{title:e.name}),e.description&&React.createElement(Ct,{style:[At["text-sm/medium"],{paddingHorizontal:16,paddingBottom:8}]},e.description)),React.createElement(wt,{horizontal:!0,showsHorizontalScrollIndicator:!1,data:e.decorations,renderItem:function({item:a}){return React.createElement(de,{decoration:a,onPress:function(){t(a),n.pop()}})},ItemSeparatorComponent:function(){return React.createElement(G,{style:{width:4}})},snapToInterval:74,decelerationRate:"fast",contentContainerStyle:{paddingHorizontal:8}}))}const{View:_t}=D.General,{FlatList:Tt}=r.ReactNative;function Pt(){const[e,t]=r.React.useState([]);return r.React.useEffect(function(){re().then(function(n){return t(n)})},[]),r.React.createElement(Tt,{data:e,renderItem:function({item:n}){return r.React.createElement(It,{preset:n})},ListFooterComponent:function(){return r.React.createElement(_t,{style:{height:18}})}})}const{FlatList:Bt,View:L,ActivityIndicator:$t,Pressable:mt}=r.ReactNative,{FormTitle:Ut}=D.Forms,{TextStyleSheet:V,Text:K}=o.findByProps("TextStyleSheet"),kt=o.findByStoreName("UserStore"),Ft=o.findByProps("parse","parseToAST"),{showUserProfile:fe}=o.findByProps("showUserProfile"),Ot=o.findByProps("getUser","fetchCurrentUser");function xt(){const[e,t]=r.React.useState(!1),[n,a]=r.React.useState([]),{decorations:s,selectedDecoration:i,fetch:c,clear:d,select:p}=E(),{isAuthorized:u}=P();r.React.useEffect(function(){u()?(re().then(function(v){return a(v)}).catch(function(){}),c().then(function(){return t(!1)}).catch(function(){return t(null)}),t(!0)):(d(),t(!1))},[u]);const y=r.NavigationNative.useNavigation(),g=s.some(function(v){return v.reviewed===!1}),B=n&&i&&n.find(function(v){return v.id===i.presetId});return r.React.createElement(r.React.Fragment,null,r.React.createElement(te,{pendingAvatarDecoration:i?k(i):null}),i&&r.React.createElement(L,{style:{marginTop:12,paddingHorizontal:16,gap:8}},r.React.createElement(K,{style:V["text-lg/semibold"]},i.alt),B&&r.React.createElement(K,{style:V.eyebrow},"Part of the ",B.name," Preset"),r.React.createElement(K,{style:V["text-md/normal"]},"Created by"," ",r.React.createElement(mt,{onPress:function(){return kt.getUser(i.authorId)?fe({userId:i.authorId}):Ot.getUser(i.authorId).then(function(){return fe({userId:i.authorId})})},pointerEvents:"box-only",style:{flexGrow:0,flexShrink:0}},Ft.parse(`<@${i.authorId}>`,!0)))),r.React.createElement(Ut,{title:"Decorations",icon:e?r.React.createElement($t,null):e===null?r.React.createElement(F,{source:h.getAssetIDByName("ic_warning_24px")}):void 0}),r.React.createElement(Bt,{horizontal:!0,showsHorizontalScrollIndicator:!1,data:s,renderItem:function({item:v}){return r.React.createElement(de,{decoration:v,disabled:!u()||e===null})},snapToInterval:74,decelerationRate:"fast",ItemSeparatorComponent:function(){return r.React.createElement(L,{style:{width:4}})},ListHeaderComponent:function(){return r.React.createElement(j,{source:h.getAssetIDByName("img_none"),label:"None",onPress:function(){p(null)},disabled:!u()||e===null,selected:!i})},ListHeaderComponentStyle:{paddingRight:s.length===0?2:4},ListFooterComponent:function(){return r.React.createElement(L,{style:{flexDirection:"row"}},r.React.createElement(j,{source:h.getAssetIDByName("ic_reaction_smile"),label:"Presets",onPress:function(){y.push("VendettaCustomPage",{title:"Presets",render:Pt})},selected:i&&i.presetId!==null,disabled:!u()||e===null}),r.React.createElement(L,{style:{width:4}}),r.React.createElement(j,{source:h.getAssetIDByName("ic_add_24px"),label:"New",onPress:g?function(){return $.showToast("You already have a decoration pending review!",h.getAssetIDByName("img_none"))}:ut,lookDisabled:g,disabled:!u()||e===null}))},ListFooterComponentStyle:{paddingLeft:s.length===0?2:4},contentContainerStyle:{paddingHorizontal:8}}))}const Lt=r.stylesheet.createThemedStyleSheet({versionText:{fontSize:15,color:b.semanticColors.TEXT_NORMAL,textAlign:"center",fontWeight:"600",lineHeight:22}}),{ScrollView:zt,View:he}=r.ReactNative,{FormSection:Mt,FormRow:Ht,FormArrow:jt,FormSwitchRow:qt,FormCTAButton:ye,FormDivider:Jt,FormInput:Xt,useReducer:Zt}=D.Forms,Gt=D.HelpMessage;function Vt(){const{isAuthorized:e}=P();return r.React.createElement(zt,null,!e()&&r.React.createElement(he,{style:{padding:8}},r.React.createElement(Gt,{messageType:0},"You need to Authorize with Decor before you can get custom decorations.")),r.React.createElement(xt,null),!e()&&r.React.createElement(Mt,null,r.React.createElement(Ht,{label:"Authorize with Decor",leading:r.React.createElement(F,{source:h.getAssetIDByName("ic_link_24px")}),trailing:jt,onPress:me})),e()&&r.React.createElement(ye,{color:"danger",label:"Logout",onPress:function(){return Q.showConfirmationAlert({title:"Logout",content:"Are you sure you want to logout?",confirmText:"Logout",confirmColor:"red",cancelText:"Cancel",onConfirm:function(){Se.storage.token=void 0,P.getState().setToken(null)}})}}),r.React.createElement(ye,{color:"brand",label:"Source",onPress:function(){return r.ReactNative.Linking.openURL("https://github.com/bwlok/revenge-plugins/tree/master/plugins/Decor")}}),r.React.createElement(r.ReactNative.Text,{style:Lt.versionText},"Decor",`
`,"Version 1.0.0"),r.React.createElement(he,{style:{height:40}}))}const pe=o.findByStoreName("UserStore"),Kt=o.findByProps("getAvatarDecorationURL","default"),Qt=o.findByProps("isAnimatedAvatarDecoration");o.findByProps("openLazy","hideActionSheet");let A=[];var Wt={onLoad:async function(){A.push(Pe),A.push(...He),A.push(...Ve),A.push(M.after("getUser",pe,function(e,t){const n=w.getState();if(t&&n.has(t.id)){const a=n.get(t.id);a&&t.avatarDecoration?.skuId!==I?t.avatarDecoration={asset:a,skuId:I}:!a&&t.avatarDecoration&&t.avatarDecoration?.skuId===I&&(t.avatarDecoration=null),t.avatarDecorationData=t.avatarDecoration}})),A.push(M.instead("getAvatarDecorationURL",Kt,function(e,t){const[{avatarDecoration:n,canAnimate:a}]=e;if(n?.skuId===I){const s=n.asset.split("_");return!a&&s[0]==="a"&&s.shift(),Ee+`/${s.join("_")}.png`}else return n?.skuId===W?n.asset:t(...e)})),A.push(M.after("isAnimatedAvatarDecoration",Qt,function([e],t){if(r.ReactNative.Platform.OS==="ios"&&e?.asset?.startsWith("file://"))return!0})),w.getState().fetch(pe.getCurrentUser().id,!0)},onUnload:function(){A.forEach(function(e){return e()})},settings:Vt};return z.default=Wt,Object.defineProperty(z,"__esModule",{value:!0}),z})({},vendetta.metro,vendetta.metro.common,vendetta.patcher,vendetta.plugin,vendetta.ui.alerts,vendetta.ui.assets,vendetta.ui,vendetta.ui.components,vendetta.ui.toasts);
