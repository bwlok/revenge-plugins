(function(f,b,t,y,d,S,i,E){"use strict";const{ScrollView:D,View:w,Text:T,Image:x}=t.ReactNative,{FormRow:h,FormSwitchRow:A}=y.Forms;d.storage.SnowPerformance??=!1;const r=t.stylesheet.createThemedStyleSheet({versionText:{fontSize:15,color:i.semanticColors.TEXT_NORMAL,textAlign:"center",fontWeight:"600",lineHeight:22},titleText:{fontSize:14,fontWeight:"600",color:i.semanticColors.TEXT_MUTED},authText:{fontSize:15,lineHeight:20,fontWeight:"600",padding:15,color:i.semanticColors.TEXT_BRAND},titleContainer:{marginBottom:8,marginHorizontal:0,marginTop:8,gap:4,flexDirection:"row",alignItems:"center",justifyContent:"space-between"},titleLeft:{flexDirection:"row",alignItems:"center",gap:4},addButton:{backgroundColor:i.semanticColors.BUTTON_POSITIVE_BACKGROUND,borderRadius:12,width:24,height:24,justifyContent:"center",alignItems:"center"},addButtonText:{color:"#FFFFFF",fontSize:18,fontWeight:"bold",lineHeight:20},deleteButton:{backgroundColor:i.semanticColors.BUTTON_DANGER_BACKGROUND,borderRadius:8,paddingHorizontal:12,paddingVertical:6},deleteButtonText:{color:"#FFFFFF",fontSize:12,fontWeight:"600"},loadingContainer:{padding:20,alignItems:"center"},loadingText:{marginTop:8,fontSize:14,color:i.semanticColors.TEXT_MUTED},emptyText:{padding:20,textAlign:"center",fontSize:14,color:i.semanticColors.TEXT_MUTED},container:{flexDirection:"row",justifyContent:"center",alignItems:"center"},image:{width:70,height:70,marginTop:20,marginLeft:20},title:{flexDirection:"column"},name:{fontSize:30,paddingTop:20,paddingLeft:20,paddingRight:30,color:i.semanticColors.HEADER_PRIMARY},author:{fontSize:15,paddingLeft:50,color:i.semanticColors.HEADER_SECONDARY},info:{height:45,paddingTop:3,paddingBottom:3,justifyContent:"center",alignItems:"center"}});function v({title:e,icon:a,children:n,padding:c=!1,action:g}){const o=t.stylesheet.createThemedStyleSheet({main:{backgroundColor:i.semanticColors.CARD_PRIMARY_BG,borderColor:i.semanticColors.BORDER_FAINT,borderWidth:1,borderRadius:16,overflow:"hidden",flex:1},icon:{width:16,height:16,marginTop:1.5,tintColor:i.semanticColors.TEXT_MUTED}});return t.React.createElement(t.ReactNative.View,{style:{marginHorizontal:16,marginTop:16}},e&&t.React.createElement(t.ReactNative.View,{style:r.titleContainer},t.React.createElement(t.ReactNative.View,{style:r.titleLeft},a&&t.React.createElement(t.ReactNative.Image,{style:o.icon,source:a,resizeMode:"cover"}),t.React.createElement(t.ReactNative.Text,{style:r.titleText},e.toUpperCase())),g),t.React.createElement(t.ReactNative.View,{style:o.main},c?t.React.createElement(t.ReactNative.View,{style:{paddingHorizontal:16,paddingVertical:16}},n):n))}function M(){return S.useProxy(d.storage),t.React.createElement(D,{style:{flex:1,backgroundColor:i.semanticColors.BACKGROUND_PRIMARY}},t.React.createElement(w,{style:r.container},t.React.createElement(x,{source:{uri:"https://cdn.bwlok.dev/snowflake.png"},style:r.image}),t.React.createElement(w,{style:r.title},t.React.createElement(T,{style:r.name},"Let it Snow"),t.React.createElement(T,{style:r.author},"by Bwlok"))),t.React.createElement(v,null,t.React.createElement(A,{label:"Enable Performance mode",subLabel:"Reduce animations and rendering to a minimum. Requires a restart",value:d.storage.SnowPerformance,onValueChange:function(e){d.storage.SnowPerformance=e}})),t.React.createElement(v,{title:"More Options"},t.React.createElement(h,{label:"Source",leading:t.React.createElement(h.Icon,{source:E.getAssetIDByName("img_account_sync_github_white")}),trailing:t.React.createElement(h.Icon,{source:E.getAssetIDByName("ic_launch")}),onPress:function(){return t.ReactNative.Linking.openURL("https://github.com/bwlok/revenge-plugins/tree/master/plugins/LetItSnow")}})),t.React.createElement(t.ReactNative.View,{style:{height:16}}),t.React.createElement(t.ReactNative.Text,{style:r.versionText},"Version 0.0.1"),t.React.createElement(t.ReactNative.View,{style:{height:32}}))}const{View:I,Animated:l,Dimensions:_,Easing:z}=t.ReactNative,{width:k,height:u}=_.get("window"),{Image:B}=t.ReactNative,s=!d.storage.SnowPerformance;let m=[];const V=[];let C=!1;function F(e,a=!1){const n=a?Math.random()*u:-50,c=new l.Value(n),g=s?new l.Value(0):null,o=Math.random()*k;let R;s?R=10+Math.random()*2.5*(Math.random()*10):R=5+Math.random()*2*(Math.random()*10);const Y=4e3+Math.random()*6e3;let p;s?p=.6+Math.random()*.4:p=1;const G=Math.random()*360,W=s&&Math.random()>.4,X=4e3+Math.random()*8e3,$=Math.random()>.5?1:-1;return{id:e,x:o,size:R,duration:Y,animValue:c,rotationValue:g,startY:n,opacity:p,rotation:G,shouldRotate:W,rotationSpeed:X,rotationDirection:$,color:"white"}}function P(e){if(!s||!e.shouldRotate)return;const a=function(){e.rotationValue.setValue(0),l.timing(e.rotationValue,{toValue:e.rotationDirection*360,duration:e.rotationSpeed,useNativeDriver:!0,easing:z.linear}).start(function({finished:n}){n&&a()})};a()}function L(e){s&&P(e);const a=function(){e.animValue.setValue(-50),l.timing(e.animValue,{toValue:u+50,duration:e.duration,useNativeDriver:!0}).start(function({finished:n}){n&&a()})};l.timing(e.animValue,{toValue:u+50,duration:e.duration*((u+50-e.startY)/(u+100)),useNativeDriver:!0}).start(function({finished:n}){n&&a()})}function N(){if(!C){C=!0;for(let e=0;e<80;e++){const a=F(e,!0);V.push(a),L(a)}}}const U=t.React.memo(function({particle:e}){if(s){const a=e.rotationValue.interpolate({inputRange:[0,360],outputRange:[`${e.rotation}deg`,`${e.rotation+360}deg`]});return t.React.createElement(l.View,{style:{position:"absolute",left:e.x,top:0,width:e.size,height:e.size,opacity:e.opacity,transform:[{translateY:e.animValue},{rotate:e.shouldRotate?a:`${e.rotation}deg`}]}},t.React.createElement(B,{source:{uri:"https://cdn.bwlok.dev/snowflake.png"},style:{width:"100%",height:"100%"},resizeMode:"contain"}))}else return t.React.createElement(l.View,{style:{position:"absolute",left:e.x,top:0,width:e.size,height:e.size,borderRadius:e.size/2,backgroundColor:e.color,opacity:e.opacity,transform:[{translateY:e.animValue}]}})}),O=function(){return t.React.useEffect(function(){N()},[]),t.React.createElement(I,{pointerEvents:"none",style:{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:9999}},V.map(function(e){return t.React.createElement(U,{key:e.id,particle:e})}))};var H={onLoad:function(){N(),m.push(b.before("render",y.General.View,function(e){const[a]=e;if(!a||!Array.isArray(a.style)||!a.style.some(function(o){return o?.flex===1}))return;let n=a.children;if(Array.isArray(n)&&(n=n.find(function(o){return o?.type?.name==="NativeStackViewInner"})),n?.type?.name!=="NativeStackViewInner")return;const c=n?.props?.state?.routeNames;if(!c?.includes("main")||!c?.includes("modal"))return;const g=Array.isArray(a.children)?a.children:[a.children];a.children=[...g,t.React.createElement(O,{key:"persistent-overlay"})]}))},onUnload:function(){for(const e of m)e()},settings:M};return f.default=H,Object.defineProperty(f,"__esModule",{value:!0}),f})({},vendetta.patcher,vendetta.metro.common,vendetta.ui.components,vendetta.plugin,vendetta.storage,vendetta.ui,vendetta.ui.assets);
