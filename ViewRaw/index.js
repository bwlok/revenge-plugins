(function(p,d,c,f,o,e,i,y){"use strict";const B=function(t){const a=JSON.parse(JSON.stringify(t));for(const r in a.author)switch(r){case"email":case"phone":case"mfaEnabled":case"hasBouncedEmail":delete a.author[r]}return a},{ScrollView:E}=e.ReactNative;function C({message:t}){const a=e.React.useMemo(function(){return JSON.stringify(B(t),null,4)},[t.id]),r={marginBottom:8};return e.React.createElement(e.React.Fragment,null,e.React.createElement(E,{style:{flex:1,marginHorizontal:13,marginVertical:10}},e.React.createElement(i.Button,{style:r,text:"Copy Raw Content",color:"brand",size:"small",disabled:!t.content,onPress:function(){e.clipboard.setString(t.content),y.showToast("Copied content to clipboard",c.getAssetIDByName("toast_copy_link"))}}),e.React.createElement(i.Button,{text:"Copy Raw Data",style:r,color:"brand",size:"small",onPress:function(){e.clipboard.setString(a),y.showToast("Copied data to clipboard",c.getAssetIDByName("toast_copy_link"))}}),t.content&&e.React.createElement(i.Codeblock,{selectable:!0,style:r},t.content),e.React.createElement(i.Codeblock,{selectable:!0},a)))}const s=o.findByProps("openLazy","hideActionSheet"),l=o.findByProps("push","pushLazy","pop"),N=o.findByProps("getRenderCloseButton")?.getRenderCloseButton??o.findByProps("getHeaderCloseButton")?.getHeaderCloseButton,P=o.findByName("Navigator")??o.findByProps("Navigator")?.Navigator,{FormRow:v,FormIcon:R}=i.Forms,A=d.before("openLazy",s,function([t,a,r]){const g=r?.message;a!=="MessageLongPressActionSheet"||!g||t.then(function(_){const k=d.after("default",_,function(V,h){e.React.useEffect(function(){return function(){k()}},[]);const w=function(){return e.React.createElement(P,{initialRouteName:"RawPage",goBackOnBackPress:!0,screens:{RawPage:{title:"ViewRaw",headerLeft:N?.(function(){return l.pop()}),render:function(){return e.React.createElement(C,{message:g})}}}})},u=f.findInReactTree(h,function(n){return Array.isArray(n)&&n[0]?.type?.name==="ActionSheetRowGroup"}),b=f.findInReactTree(h,function(n){return n?.[0]?.type?.name==="ButtonRow"});if(b)b.push(e.React.createElement(v,{label:"View Raw",leading:e.React.createElement(R,{style:{opacity:1},source:c.getAssetIDByName("ic_chat_bubble_16px")}),onPress:function(){s.hideActionSheet(),l.push(w)}}));else if(u&&u[1]){const n=u[1],I=n.props.children[0].type,z=e.React.createElement(I,{label:"View Raw",icon:{$$typeof:n.props.children[0].props.icon.$$typeof,type:n.props.children[0].props.icon.type,key:null,ref:null,props:{IconComponent:function(){return e.React.createElement(R,{style:{opacity:1},source:c.getAssetIDByName("ic_chat_bubble_32px")})}}},onPress:function(){s.hideActionSheet(),l.push(w)},key:"view-raw"});n.props.children.push(z)}else console.log("[ViewRaw] Error: Could not find ActionSheet")})})}),S=function(){return A()};return p.onUnload=S,p})({},vendetta.patcher,vendetta.ui.assets,vendetta.utils,vendetta.metro,vendetta.metro.common,vendetta.ui.components,vendetta.ui.toasts);
