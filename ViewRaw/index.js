(function(l,u,i,g,o,e,s,d){"use strict";const R=function(t){const n=JSON.parse(JSON.stringify(t));for(const a in n.author)switch(a){case"email":case"phone":case"mfaEnabled":case"hasBouncedEmail":delete n.author[a]}return n},{ScrollView:h}=e.ReactNative;function B({message:t}){const n=e.React.useMemo(function(){return JSON.stringify(R(t),null,4)},[t.id]),a={marginBottom:8};return e.React.createElement(e.React.Fragment,null,e.React.createElement(h,{style:{flex:1,marginHorizontal:13,marginVertical:10}},e.React.createElement(s.Button,{style:a,text:"Copy Raw Content",color:"brand",size:"small",disabled:!t.content,onPress:function(){e.clipboard.setString(t.content),d.showToast("Copied content to clipboard",i.getAssetIDByName("toast_copy_link"))}}),e.React.createElement(s.Button,{text:"Copy Raw Data",style:a,color:"brand",size:"small",onPress:function(){e.clipboard.setString(n),d.showToast("Copied data to clipboard",i.getAssetIDByName("toast_copy_link"))}}),t.content&&e.React.createElement(s.Codeblock,{selectable:!0,style:a},t.content),e.React.createElement(s.Codeblock,{selectable:!0},n)))}const p=o.findByProps("openLazy","hideActionSheet"),f=o.findByProps("push","pushLazy","pop"),b=o.findByProps("getRenderCloseButton")?.getRenderCloseButton??o.findByProps("getHeaderCloseButton")?.getHeaderCloseButton,w=o.findByName("Navigator")??o.findByProps("Navigator")?.Navigator,{FormRow:z,FormIcon:C}=s.Forms,E=u.before("openLazy",p,function([t,n,a]){const y=a?.message;n!=="MessageLongPressActionSheet"||!y||t.then(function(P){const v=u.after("default",P,function(I,S){e.React.useEffect(function(){return function(){v()}},[]);const c=g.findInReactTree(S,function(r){return Array.isArray(r)&&r[0]?.type?.name==="ActionSheetRowGroup"});if(c&&c[1]){const r=c[1],A=function(){return e.React.createElement(w,{initialRouteName:"RawPage",goBackOnBackPress:!0,screens:{RawPage:{title:"ViewRaw",headerLeft:b?.(function(){return f.pop()}),render:function(){return e.React.createElement(B,{message:y})}}}})},k=r.props.children[0].type,_=e.React.createElement(k,{label:"View Raw",icon:{$$typeof:r.props.children[0].props.icon.$$typeof,type:r.props.children[0].props.icon.type,key:null,ref:null,props:{IconComponent:function(){return e.React.createElement(C,{style:{opacity:1},source:i.getAssetIDByName("ic_chat_bubble_32px")})}}},onPress:function(){p.hideActionSheet(),f.push(A)},key:"view-raw"});r.props.children.push(_)}})})}),N=function(){return E()};return l.onUnload=N,l})({},vendetta.patcher,vendetta.ui.assets,vendetta.utils,vendetta.metro,vendetta.metro.common,vendetta.ui.components,vendetta.ui.toasts);
